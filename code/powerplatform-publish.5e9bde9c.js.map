{"version":3,"file":"powerplatform-publish.5e9bde9c.js","sources":["../../src/script/pages/powerplatform-publish.ts"],"sourcesContent":["import { LitElement, css, html } from 'lit';\nimport { customElement} from 'lit/decorators.js';\n\nimport '../components/app-header';\nimport '../components/publish-pane';\nimport '../components/test-publish-pane';\n\nimport { getManifest } from '../services/manifest';\nimport { Router } from '@vaadin/router';\n\n@customElement('powerplatform-publish')\nexport class AppReport extends LitElement {\n\n  static get styles() {\n    return [\n      css`\n        * {\n          box-sizing: border-box;\n          font-family: inherit;\n        }\n\n        app-header::part(header) {\n          position: sticky;\n          top: 0;\n        }\n\n\n        #report-wrapper {\n          width: 100%;\n          display: flex;\n          flex-direction: column;\n          row-gap: 1.5em;\n          align-items: center;\n          background-color: #f2f3fb;\n          padding: 20px;\n        }\n        #content-holder {\n          max-width: 1300px;\n          width: 100%;\n          display: flex;\n          flex-flow: row wrap;\n          gap: 1em;\n        }\n\n        .skeleton-shapes sl-skeleton {\n          display: inline-flex;\n          width: 50px;\n          height: 50px;\n        }\n\n        .skeleton-shapes .square::part(indicator) {\n          --border-radius: var(--sl-border-radius-medium);\n        }\n\n        .skeleton-shapes .circle::part(indicator) {\n          --border-radius: var(--sl-border-radius-circle);\n        }\n\n        .skeleton-shapes .triangle::part(indicator) {\n          --border-radius: 0;\n          clip-path: polygon(50% 0, 0 100%, 100% 100%);\n        }\n\n        .skeleton-shapes .cross::part(indicator) {\n          --border-radius: 0;\n          clip-path: polygon(\n            20% 0%,\n            0% 20%,\n            30% 50%,\n            0% 80%,\n            20% 100%,\n            50% 70%,\n            80% 100%,\n            100% 80%,\n            70% 50%,\n            100% 20%,\n            80% 0%,\n            50% 30%\n          );\n        }\n\n        .skeleton-shapes .comment::part(indicator) {\n          --border-radius: 0;\n          clip-path: polygon(0% 0%, 100% 0%, 100% 75%, 75% 75%, 75% 100%, 50% 75%, 0% 75%);\n        }\n\n        .skeleton-shapes sl-skeleton:not(:last-child) {\n          margin-right: 0.5rem;\n        }\n\n      `,\n    ];\n  }\n\n  async firstUpdated() {\n    const search = new URLSearchParams(location.search);\n    const site = search.get('site');\n    if (site) {\n      if (await getManifest(site)) {\n        this.openPublishModal();\n      } else {\n        Router.go(`/reportcard?site=${site}`);\n      }\n    } else {\n      Router.go('/');\n    }\n  }\n\n  delay(ms: number) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  async openPublishModal() {\n    let dialog: any = this.shadowRoot!.querySelector(\"publish-pane\")!.shadowRoot!.querySelector(\".dialog\");\n\n    await dialog.show()\n  }\n\n  render() {\n    return html`\n      <app-header></app-header>\n      <div id=\"report-wrapper\">\n      <div class=\"skeleton-shapes\">\n        <sl-skeleton effect=\"pulse\" class=\"square\"></sl-skeleton>\n        <sl-skeleton effect=\"pulse\" class=\"circle\"></sl-skeleton>\n        <sl-skeleton effect=\"pulse\" class=\"triangle\"></sl-skeleton>\n        <sl-skeleton effect=\"pulse\" class=\"cross\"></sl-skeleton>\n        <sl-skeleton effect=\"pulse\" class=\"comment\"></sl-skeleton>\n      </div>\n      </div>\n\n      <publish-pane .preventClosing=${true}></publish-pane>\n    `;\n  }\n}\n"],"names":["AppReport","LitElement","css","site","getManifest","Router","ms","resolve","html","__decorateClass","customElement"],"mappings":"+UAWa,IAAAA,EAAN,cAAwBC,CAAW,CAExC,WAAW,QAAS,CACX,MAAA,CACLC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,OAAA,CA6EJ,CAEA,MAAM,cAAe,CAEb,MAAAC,EADS,IAAI,gBAAgB,SAAS,MAAM,EAC9B,IAAI,MAAM,EAC1BA,EACE,MAAMC,EAAYD,CAAI,EACxB,KAAK,iBAAiB,EAEfE,EAAA,GAAG,oBAAoBF,GAAM,EAGtCE,EAAO,GAAG,GAAG,CAEjB,CAEA,MAAMC,EAAY,CAChB,OAAO,IAAI,QAAQC,GAAW,WAAWA,EAASD,CAAE,CAAC,CACvD,CAEA,MAAM,kBAAmB,CAGvB,MAFkB,KAAK,WAAY,cAAc,cAAc,EAAG,WAAY,cAAc,SAAS,EAExF,MACf,CAEA,QAAS,CACA,OAAAE;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,sCAY2B;AAAA,KAEpC,CACF,EA3HaR,EAANS,EAAA,CADNC,EAAc,uBAAuB,CAAA,EACzBV,CAAA"}